
<!DOCTYPE html>
<html>
<head>
	<title>Expense Tracker</title>
	<!-- <style>
		
        .contain {
        display: flex;
      }
      
      .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100vh;
        background-color: grey;
        color: #fff;
        padding: 20px;
      }
      
      .sidebar ul {
        list-style: none;
        padding: 0;
      }
      
      .sidebar li {
        margin: 10px 0;
        padding: 10px;
        height: 60px;
        border: 1px solid #f0d98f;
        border-radius: 15px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      
      .sidebar a {
        color: #fff;
        text-decoration: none;
        font-size: 25px;
      }
      
      .content {
        flex: 1;
        padding: 20px;
      }
      h1 {
        text-align: center;
        font-size: 36px;
        margin-top: 50px;
      }

      .scroll_vert2 ul {
        list-style: none;
        padding: 0;
        margin: 0 auto;
        max-width: 700px;
      }

      .scroll_vert2 li {
        margin: 10px 0;
        padding: 10px;
        height: 100px;
        font-size: 40px;
        border: 1px solid #f0d98f;
        border-radius: 25px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .scroll_vert2 {
        background-color: rgba(51, 51, 51, 0.5);
        height: 100%;
        width: 74%;
        border-radius: 40px;
        overflow-x:visible;
        overflow-y: scroll;
        margin-left: 20%;
        }
        .scroll_vert2::-webkit-scrollbar {
          display: none;
        }
        .scroll_vert2 {
          -ms-overflow-style: none;  
          scrollbar-width: none;
        }
		#mylist3 li {
			margin-bottom: 1rem;
			padding: 1rem;
            
			background-color: #fff;
			box-shadow: 0 2px 5px rgba(0,0,0,0.1);
			border-radius: 5px;
			display: flex;
			align-items: center;
            width:800px;
            height:100px;
			justify-content: space-between;
		}
        footer{
            background-color:gray;
            color:black;
            font-weight:bold;
            margin-bottom:0;
            position:relative;
            bottom:0;
            left:0;
            margin-top:100px;
            margin-left:350px;
            margin-right: 100px;
            border-radius:20px;
            right:0;
            z-index: 1;
            text-align:center;
            }
		#mylist3 li input[type="button"] {
			background-color: lightgreen;
			color:black;
            height: 60px;
            width: 120px;
            font-size: 25px;
			padding: 0.5rem 1rem;
			border: none;
			border-radius: 5px;
			cursor: pointer;
		}

		#mylist3 li input[type="button"]:hover {
			background-color:yellow;
			color: #333;
		}
        a {
            display: block;
            padding: 10px;
            background-color: #008CBA;
            color: white;
            border-radius: 25px;
            text-align: center;
            text-decoration: none;
            transition: background-color 0.3s;
        }
        a:hover {
            background-color: #006B8F;
        } 
        .logo{
        height:150px;
        width:150px;
        margin-left:75px;
      }
	</style> -->
  <style>
    body {
        font-family: 'Arial', sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
    }

    .contain {
        display: flex;
        flex-wrap: wrap;
    }

    .sidebar {
        width: 100%;
        background-color: #333;
        color: #fff;
        padding: 20px;
        box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
    }

    .sidebar h1 {
        font-size: 1.5em;
        margin-bottom: 20px;
        color: #f0d98f;
    }
    ul {
  list-style-type: none;
  padding: 0;
}

li {
  margin-bottom: 10px;
  background-color: #008CBA;
  color: white;
  border-radius: 10px;
  padding: 10px;
  display: block;
}

li a {
  display: block;
  padding: 10px;
  background-color: #008CBA;
  color: white;
  border-radius: 10px;
  text-decoration: none;
  transition: background-color 0.3s;
}

li a:hover {
  background-color: #006B8F;
}
    .logo {
        display: block;
        margin: 0 auto 20px;
        height: 100px;
        width: 100px;
        border-radius: 50%;
    }

    .sidebar hr {
        border-color: #555;
        margin: 20px 0;
    }

    .sidebar h2 {
        text-align: center;
        font-size: 1.2em;
        margin-bottom: 10px;
    }

    .sidebar p {
        font-size: 14px;
        line-height: 1.5;
    }

    .a {
        display: block;
        padding: 10px;
        background-color: #008CBA;
        color: white;
        border-radius: 25px;
        text-align: center;
        text-decoration: none;
        transition: background-color 0.3s;
    }

    .a:hover {
        background-color: #006B8F;
    }

    .content {
        flex: 1;
        padding: 20px;
    }

    h1 {
        text-align: center;
        font-size: 36px;
        margin-top: 50px;
        color: #333;
    }

    .scroll_vert2 {
        background-color: rgba(255, 255, 255, 0.8);
        border-radius: 20px;
        overflow: scroll;
        max-height: 70vh;
        margin: 20px;
        padding: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .scroll_vert2::-webkit-scrollbar {
        width: 8px;
    }

    .scroll_vert2::-webkit-scrollbar-thumb {
        background-color: #888;
        border-radius: 4px;
    }

    footer {
        background-color: #333;
        color: white;
        font-weight: bold;
        margin-top: 20px;
        padding: 10px;
        text-align: center;
    }

    @media only screen and (min-width: 768px) {
        .sidebar {
            width: 300px;
        }

        .content {
            padding: 20px;
        }
    }
</style>
</head>
<body background="https://img.freepik.com/free-vector/abstract-geometric-wireframe-background_52683-59421.jpg" style="background-repeat: no-repeat; background-attachment: fixed; background-size: cover;">

    <div class="contain">
        <div class="sidebar">
            <div style="background-color: #86becc; border-radius: 20px;">
                <h1 style="font-size: 1.5em;">BILL SPLITTER <span style="color: yellow">PRO</span></h1>
            </div>
            <img class="logo"
                src="https://is1-ssl.mzstatic.com/image/thumb/Purple49/v4/bf/89/b8/bf89b8dc-3bdd-3c59-3565-bc436b1c965a/source/512x512bb.jpg"
                alt="Logo">
            <hr>
            <h2 style="text-align: center;">HOME PAGE</h2>
            <p style="font-size: 14px;"> Welcome to BILL SPLITTER <span style="color: yellow">PRO</span><br>
                You can proceed to make a new group and add members into it or select an existing group to make changes.
                Newly created group at the end
            </p>
            <hr>
            <a class="a" href="http://127.0.0.1:5000/">Home</a>
        </div>
        <div class="content">
          <div class="container_2">
            <div class="scroll_vert2">
    <header>
        <h1 style="font-size:50px;color:rgb(6, 6, 0);">{{table}}</h1>
    </header>


	<h1 id="key" style="display: none;">{{key}}</h1>
	<h2 id="tab" style="display: none;">{{table}}</h2>

	<ul id="mylist">
		{% for member in members %}
		<li>{{ member }}</li>
		{% endfor %}
	</ul>

	<ul id="mylist2">
		{% for amount in data[0] %}
		<li>{{ amount }}</li>
		{% endfor %}
	</ul>

	<ul id="mylist3"></ul>
</div>
</div>
  </div>
</div>
<div><footer>
    <p>Created by Gopendra Singh and Annamalai Senthil and Yashaswini Duggaraju</p>
    <p>Contact us: gopendra.singh@students.iiit.ac.in | annamalai.senthil@students.iiit.ac.in | yashaswini.duggaraju@students.iiit.ac.in </p>
    <p>Copyright &copy; 2023 My Website.
    All rights reserved.</p>
  </footer></div>

</body>
<script>
    var array=[];
    var brray=[];
    var len=0;
    var king;
    var flag=0;
    document.getElementById('mylist').style.display = 'none';
	document.getElementById('mylist2').style.display = 'none';
	var mylist=document.getElementById("mylist");
	for(var i=0;i<mylist.children.length;i++){
		let listitem=mylist.children[i];
		array.push(listitem.innerHTML);
		len=i+1;
	}
    var mylist2=document.getElementById("mylist2");
	for(var i=0;i<mylist2.children.length;i++){
		let listitem=mylist2.children[i];
		brray.push(listitem.innerHTML);
	}
    let listElement = "";

      for (let i = 3; i < len; i++) {
        let element = array[i];
        let amount=brray[i];

        if(amount<0){
            listElement+= "<li>" + element + " OWES "+ amount+ " in this transaction."+ "<input type=button value=settleup name=dummy id="+element+">"+ "</input>"+"</li>";
            flag=1;
        }
         else if(amount>0)
            king=element;
      }
      if(flag===0){
        listElement+= "<li>" +"HURRAY!!! EVERYTHING IS SETTLED UP"+"</li>";
      }

      document.getElementById("mylist3").innerHTML = listElement;
      const settle = document.querySelectorAll('input[name="dummy"]');
	settle.forEach((person) => {
  	person.addEventListener('click', () => {
        var col=person.id;
        var key=document.getElementById("key").innerHTML;
        var tab=document.getElementById("tab").innerHTML;
        let obj={1:key,2:col,3:king,4:tab};
        console.log(obj);
        fetch('/finalsettel', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(obj)
        })
        location.reload();
	});
        
    });

</script>
</html>